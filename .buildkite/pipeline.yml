steps:
  - label: 'Build image'
    command: docker build --tag diagrams:1.0 -f ./docker/dev/Dockerfile .

  - wait
  - label: 'Run tests'
    command: docker run --rm diagrams:1.0 python -m unittest tests/*.py -v

  - wait
  - label: 'Autogen classes'
    command: docker run --rm diagrams:1.0 ./autogen.sh

  - label: 'List dir'
    command: ls -lah $BUILDKITE_BUILD_CHECKOUT_PATH